version: "1"
job: hackernews_test
source:
  kind: html
  entry: https://news.ycombinator.com/
  parser: generic
  rate_limit_rps: 1.0
  cursor:
    field: url
    stop_when_seen: true

transform:
  pipeline:
    - normalize: generic

sink:
  kind: csv
  path: data/cache/hn/%Y%m%dT%H%M%SZ.csv

policy:
  robots: allow
  allowlist:
    - news.ycombinator.com

selectors:
  item: ".athing"
  fields:
    title: "span.titleline a"
    url: "span.titleline a::attr(href)"
    id: "::attr(id)"
